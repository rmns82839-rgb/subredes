<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Subnetting IP</title>
    <!-- Incluir Tailwind CSS para un look moderno y limpio, aunque usaremos CSS propio para mantener la estructura -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Roboto+Mono:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <!-- Carga de MathJax para notación LaTeX -->
    <script>
        // Configuración de MathJax para usar notación LaTeX inline
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
            },
            svg: {
                fontCache: 'global'
            }
        };
    </script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

</head>
<body>

    <div class="container">
        
        <header class="app-header">
            <!-- Nuevo contenedor para alinear título y botón -->
            <div class="app-header-content">
                <h1>Calculadora de Subnetting IP</h1>
                
                <a href="https://rmns82839-rgb.github.io/Binarios-y-decimales-/"
    class="link-btn external-link-btn"
    title="Visitar Herramienta de Binarios y Decimales">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon-link">
        <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
        <polyline points="15 3 21 3 21 9"></polyline>
        <line x1="10" y1="14" x2="21" y2="3"></line>
    </svg>
    <span class="link-btn-title">Herramienta Binaria</span> 
    <span class="sr-only">Herramienta de Binarios</span>
</a>
            </div>
            <!-- Fin del nuevo contenedor -->

            <p class="subtitle">CLSM y VLSM con Persistencia Local</p>
        </header>

        <main class="main-app-content">
            <!-- Sección de Entrada de Datos -->
            <section class="card input-section">
                <h2 class="section-title">Datos de Red</h2>
                <div class="input-group">
                    <label for="ip-address">Dirección IP:</label>
                    <input type="text" id="ip-address" placeholder="Ej: 192.168.1.0" onchange="saveInputState()">
                </div>
                <div class="input-group">
                    <label for="cidr">Prefijo CIDR Inicial (/n):</label>
                    <input type="number" id="cidr" min="0" max="32" value="24" onchange="saveInputState()">
                </div>

                <!-- Selección de Tipo de Cálculo -->
                <div class="radio-group">
                    <input type="radio" id="clsm" name="calculation-type" value="clsm" checked onclick="toggleCLSMInputs(true); saveInputState();">
                    <label for="clsm">CLSM (Máscara Fija)</label>

                    <input type="radio" id="vlsm" name="calculation-type" value="vlsm" onclick="toggleCLSMInputs(false); saveInputState();">
                    <label for="vlsm">VLSM (Máscara Variable)</label>
                </div>

                <!-- Controles CLSM -->
                <div id="clsm-controls" class="control-group">
                    <h3 class="group-title">CLSM: Requerimiento</h3>
                    <div class="input-group">
                        <label for="clsm-subnets">Subredes Requeridas:</label>
                        <input type="number" id="clsm-subnets" min="2" placeholder="Ej: 4" onchange="saveInputState()">
                    </div>
                </div>

                <!-- Controles VLSM -->
                <div id="vlsm-controls" class="control-group hidden">
                    <h3 class="group-title">VLSM: Requerimientos de Hosts</h3>
                    <div id="host-requirements-list">
                        <div class="vlsm-input-group">
                            <input type="number" class="vlsm-host-input" min="1" placeholder="Hosts para Subred 1" onchange="saveInputState()">
                            <button type="button" class="remove-host-btn" onclick="removeHostInput(this)">-</button>
                        </div>
                    </div>
                    <button type="button" class="btn btn-secondary" onclick="addHostInput()">+ Agregar Requisito</button>
                    <p id="vlsm-error-message" class="error-message"></p>
                </div>

                <!-- Botones de Acción -->
                <div class="action-buttons">
                    <button type="button" class="btn btn-primary" onclick="calculateSubnetting()">CALCULAR SUBREDES</button>
                    <button type="button" class="btn btn-danger" onclick="clearAll()">LIMPIAR TODO / REINICIAR</button>
                </div>
            </section>
            
            <!-- Sección de Resultados Finales -->
            <section class="card results-section">
                <h2 class="section-title">Resultados</h2>
                <div id="results-output" class="output-content">
                    <p>Ingrese los datos y presione "CALCULAR SUBREDES" para ver los resultados.</p>
                </div>
            </section>

             <!-- Sección de Paso a Paso (Nueva) -->
            <section class="card step-by-step-section">
                <h2 class="section-title">Paso a Paso del Cálculo</h2>
                <div id="step-by-step-output" class="output-content">
                    <p>El proceso detallado de la segmentación se mostrará aquí.</p>
                </div>
            </section>
        </main>

        <!-- Barra Lateral de Utilidades (Nueva) -->
        <aside class="utility-sidebar">
            <section class="card utility-card">
                <h2 class="section-title">Calculadora $2^n$</h2>
                <p class="sidebar-text">Calcula el total de direcciones o hosts para un número de bits dado.</p>
                <div class="input-group">
                    <label for="exponent-input">Valor de 'n' (Bits):</label>
                    <input type="number" id="exponent-input" min="0" max="31" placeholder="Ej: 8" value="8">
                </div>
                <button type="button" class="btn btn-secondary btn-full-width" onclick="calculateExponent()">Calcular $2^n$</button>
                <div id="exponent-output" class="output-content exponent-result">
                    $$2^8 = 256$$
                </div>
            </section>
            
            <section class="card utility-card">
                <h2 class="section-title">Estado de la App</h2>
                <p id="auth-status" class="sidebar-text">Estado: Persistencia Local</p>
                <p class="sidebar-text info-note">Los datos se guardan en el navegador automáticamente.</p>
            </section>
        </aside>
    </div>

    <!-- SCRIPT JS INTEGRADO -->
    <script src="script.js"></script>
</body>
</html>

